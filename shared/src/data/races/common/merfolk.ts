import { RaceDefinition } from '../../../types/race';

export const merfolk: RaceDefinition = {
  id: 'merfolk',
  name: 'Merfolk',
  tier: 'common',
  lore: 'The Merfolk have existed beneath the waves since before land-dwellers built their first huts. Part humanoid, part aquatic, they can breathe both air and water — though they\'re far more comfortable in the sea. For most of history, Merfolk kept to themselves. But the expansion of surface trade routes, overfishing, and the occasional sunken treasure dispute have drawn them into the affairs of the land. Merfolk on the surface walk on two legs (their tails split in air) but move slower than other races on land. In water, they\'re unmatched. They bring unique oceanic resources — deep sea ores, pearls, coral, rare aquatic herbs — that no surface race can gather.',
  trait: {
    name: 'Amphibious',
    description: 'Can breathe water and air. Excels in water, slower on land.',
  },
  statModifiers: { str: 1, dex: 2, con: 2, int: 0, wis: 2, cha: 1 },
  abilities: [
    {
      name: 'Waterborne',
      description: 'Swim speed 3x land speed, access underwater resource nodes',
      levelRequired: 1,
      type: 'passive',
      effectType: 'movement',
      effectValue: { swimSpeedMultiplier: 3, underwaterAccess: true },
      targetType: 'self',
    },
    {
      name: 'Tidal Healing',
      description: 'When in water, heal 25% of max HP over 1 minute',
      levelRequired: 5,
      type: 'active',
      effectType: 'healing',
      effectValue: { healPercent: 0.25, requiresWater: true },
      cooldownSeconds: 14400,
      duration: 60,
      targetType: 'self',
    },
    {
      name: 'Depth Pressure',
      description: '+20% yield on underwater gathering (deep sea ore, pearls, coral)',
      levelRequired: 10,
      type: 'passive',
      effectType: 'gathering_bonus',
      effectValue: { yieldBonus: 0.20, scope: 'underwater' },
      targetType: 'self',
    },
    {
      name: 'Aquatic Camouflage',
      description: 'Invisible while submerged and stationary (PvP advantage near water)',
      levelRequired: 15,
      type: 'passive',
      effectType: 'stealth',
      effectValue: { invisible: true, requiresSubmerged: true, requiresStationary: true },
      targetType: 'self',
    },
    {
      name: 'Call of the Deep',
      description: 'Summon a water elemental companion for 1 combat encounter',
      levelRequired: 25,
      type: 'active',
      effectType: 'summon',
      effectValue: { summonType: 'water_elemental', durationCombats: 1 },
      cooldownSeconds: 86400,
      targetType: 'self',
    },
    {
      name: 'Tsunami Strike',
      description: 'Massive water AoE: 3d8 damage, all enemies knocked prone',
      levelRequired: 40,
      type: 'active',
      effectType: 'aoe_attack',
      effectValue: { damage: '3d8', damageType: 'water', knockProne: true, usesPerCombat: 1 },
      targetType: 'aoe',
    },
  ],
  professionBonuses: [
    { professionType: 'fishing', speedBonus: 0, qualityBonus: 0, yieldBonus: 0.40, xpBonus: 0 },
    { professionType: 'pearl_diving', speedBonus: 0, qualityBonus: 0, yieldBonus: 0.30, xpBonus: 0 },
    { professionType: 'alchemy', speedBonus: 0, qualityBonus: 0.20, yieldBonus: 0, xpBonus: 0 },
    { professionType: 'enchanting', speedBonus: 0, qualityBonus: 0.15, yieldBonus: 0, xpBonus: 0 },
    { professionType: 'land_gathering', speedBonus: -0.15, qualityBonus: 0, yieldBonus: 0, xpBonus: 0 },
  ],
  gatheringBonuses: [
    { resourceType: 'fish', biome: 'coast', bonusPercent: 25 },
    { resourceType: 'pearls', biome: 'underwater', bonusPercent: 20 },
    { resourceType: 'herbs', biome: 'coast', bonusPercent: 10 },
  ],
  homelandRegion: 'The Pelagic Depths',
  startingTowns: ['Coralspire', 'Shallows End', 'Abyssal Reach'],
  exclusiveZone: 'Deep Ocean',
  specialMechanics: {
    hasUnderwaterAccess: true,
    landSpeedPenalty: 0.85,
    underwaterZones: {
      description: 'Merfolk unlock access to underwater resource nodes that no other race can reach without expensive magical gear.',
      exclusiveResources: ['Deep Sea Iron', 'Abyssal Pearls', 'Living Coral', 'Sea Silk', 'Leviathan Bone', 'Tideweave Kelp'],
    },
  },
};
