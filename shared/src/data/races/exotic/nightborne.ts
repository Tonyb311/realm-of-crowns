import { RaceDefinition } from '../../../types/race';

export const nightborne: RaceDefinition = {
  id: 'nightborne',
  name: 'Dark Elves (Nightborne)',
  tier: 'exotic',
  lore: "The Nightborne are Elves who, millennia ago, followed a different path — downward, into the Underdark. Their skin turned obsidian, their hair moonwhite, and their magic turned to shadow and poison. Nightborne society is ruthlessly hierarchical, ruled by powerful Matriarchs who command through fear, cunning, and genuine arcane power. They are master poisoners, shadow mages, and the finest spider-silk weavers in existence. Surface races fear them — and not without reason. But not all Nightborne embrace cruelty. Some seek the surface, trading their unique Underdark resources for a place in the light.",
  trait: {
    name: 'Shadowborn',
    description: 'Agile and magically potent, weakened by direct sunlight.',
  },
  statModifiers: { str: 0, dex: 3, con: 0, int: 2, wis: 1, cha: 2 },
  abilities: [
    {
      name: 'Superior Deepsight',
      description: 'See perfectly in darkness, access Underdark zones',
      levelRequired: 1,
      type: 'passive',
      effectType: 'zone_access',
      effectValue: { perfectDeepsight: true, accessZone: 'underdark' },
      targetType: 'self',
    },
    {
      name: 'Sunlight Sensitivity',
      description: '-2 to attack rolls and perception in direct sunlight',
      levelRequired: 5,
      type: 'passive',
      effectType: 'penalty',
      effectValue: { attackPenalty: -2, perceptionPenalty: -2, condition: 'direct_sunlight' },
      targetType: 'self',
    },
    {
      name: 'Nightborne Magic',
      description: 'Cast Darkness spell: 15ft radius, non-magical light extinguished',
      levelRequired: 5,
      type: 'active',
      effectType: 'spell',
      effectValue: { spell: 'darkness', radius: '15ft' },
      cooldownSeconds: 28800,
      targetType: 'aoe',
    },
    {
      name: 'Poison Mastery',
      description: '+25% poison damage, poisons you craft are 30% more potent',
      levelRequired: 10,
      type: 'passive',
      effectType: 'damage_bonus',
      effectValue: { poisonDamageBonus: 0.25, craftedPoisonPotency: 0.30 },
      targetType: 'self',
    },
    {
      name: 'Web Walker',
      description: 'Move through spider webs freely, access spider-silk harvesting nodes',
      levelRequired: 15,
      type: 'passive',
      effectType: 'movement',
      effectValue: { webImmunity: true, spiderSilkAccess: true },
      targetType: 'self',
    },
    {
      name: 'Shadow Step',
      description: 'Teleport up to 30ft between shadows, next attack has advantage',
      levelRequired: 25,
      type: 'active',
      effectType: 'teleport',
      effectValue: { range: '30ft', requiresShadows: true, nextAttackAdvantage: true, usesPerCombat: 1 },
      targetType: 'self',
    },
    {
      name: "Matriarch's/Patriarch's Command",
      description: 'Dominate a hostile NPC to fight for you for 1 combat',
      levelRequired: 40,
      type: 'active',
      effectType: 'dominate',
      effectValue: { dominateNpc: true, durationCombats: 1 },
      cooldownSeconds: 86400,
      targetType: 'enemy',
    },
  ],
  professionBonuses: [
    { professionType: 'alchemy', speedBonus: 0, qualityBonus: 0.30, yieldBonus: 0, xpBonus: 0 },
    { professionType: 'tailoring', speedBonus: 0, qualityBonus: 0.25, yieldBonus: 0, xpBonus: 0 },
    { professionType: 'enchanting', speedBonus: 0, qualityBonus: 0.20, yieldBonus: 0, xpBonus: 0 },
    { professionType: 'mining', speedBonus: 0, qualityBonus: 0, yieldBonus: 0.20, xpBonus: 0 },
    { professionType: 'daytime_activities', speedBonus: -0.10, qualityBonus: 0, yieldBonus: 0, xpBonus: 0 },
  ],
  gatheringBonuses: [
    { resourceType: 'ore', biome: 'underground', bonusPercent: 20 },
    { resourceType: 'herbs', biome: 'underground', bonusPercent: 15 },
    { resourceType: 'stone', biome: 'underground', bonusPercent: 10 },
  ],
  homelandRegion: "Vel'Naris (Underdark)",
  startingTowns: ["Vel'Naris", 'Gloom Market'],
  exclusiveZone: 'Underdark',
  specialMechanics: {
    hasUnderdarkAccess: true,
    sunlightPenalty: true,
    underdarkAccess: {
      description: 'Nightborne can freely enter the Underdark — a vast underground network beneath Aethermere with unique resources. Other races need special gear (expensive) to survive down there.',
      exclusiveResources: ['Darksteel Ore', 'Spider Silk', 'Gloomcap Mushrooms', 'Shadow Crystals', 'Underdark Pearls'],
    },
  },
};
