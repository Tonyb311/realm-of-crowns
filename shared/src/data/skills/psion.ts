import { AbilityDefinition } from './types';

export const psionAbilities: AbilityDefinition[] = [
  // ---- Telepath (psychic damage/control) ----
  { id: 'psi-tel-1', name: 'Mind Spike', description: 'Lance a target\'s mind with psychic energy, dealing damage and weakening their resolve.', class: 'psion', specialization: 'telepath', tier: 1, effects: { type: 'damage_status', damageType: 'psychic', diceCount: 2, diceSides: 6, damageBonus: 'int', saveType: 'int', statusEffect: 'weakened', statusDuration: 2, attackReduction: -1, description: 'Psychic lance that damages and weakens the target.' }, cooldown: 0, levelRequired: 1 },
  { id: 'psi-tel-2', name: 'Thought Shield', description: 'A constant psychic barrier that resists mental intrusion and bolsters saves against mind effects.', class: 'psion', specialization: 'telepath', tier: 2, effects: { type: 'passive', psychicResistance: true, mentalSaveBonus: 2, description: 'Passive resistance to psychic damage and +2 to mental saves.' }, cooldown: 0, prerequisiteAbilityId: 'psi-tel-1', levelRequired: 5 },
  { id: 'psi-tel-3', name: 'Psychic Crush', description: 'Collapse the target\'s psyche inward, dealing heavy psychic damage with a chance to stun.', class: 'psion', specialization: 'telepath', tier: 3, effects: { type: 'damage_status', damageType: 'psychic', diceCount: 3, diceSides: 8, damageBonus: 'int', saveType: 'wis', statusEffect: 'stunned', statusDuration: 1, halfDamageOnSave: true, description: 'Crushing psychic force that stuns on a failed save; half damage on success.' }, cooldown: 1, prerequisiteAbilityId: 'psi-tel-2', levelRequired: 12 },
  { id: 'psi-tel-4', name: 'Dominate', description: 'Seize control of a target\'s actions for one round. On a successful save the target is merely weakened.', class: 'psion', specialization: 'telepath', tier: 4, effects: { type: 'control', damageType: 'psychic', saveType: 'wis', savePenalty: -2, controlType: 'dominate', controlDuration: 1, failEffect: 'weakened', failDuration: 2, description: 'Dominate a target for 1 round; weakened for 2 rounds on save.' }, cooldown: 1, prerequisiteAbilityId: 'psi-tel-3', levelRequired: 18 },
  { id: 'psi-tel-5', name: 'Mind Shatter', description: 'Unleash a psychic shockwave that damages and weakens all nearby enemies.', class: 'psion', specialization: 'telepath', tier: 5, effects: { type: 'aoe_damage_status', damageType: 'psychic', diceCount: 3, diceSides: 6, damageBonus: 'int', saveType: 'wis', statusEffect: 'weakened', statusDuration: 2, halfDamageOnSave: true, description: 'AoE psychic burst; half damage and no status on save.' }, cooldown: 1, prerequisiteAbilityId: 'psi-tel-4', levelRequired: 28 },
  { id: 'psi-tel-6', name: 'Absolute Dominion', description: 'Overwhelm a target\'s will entirely, seizing total control for two rounds. Failure still stuns and damages.', class: 'psion', specialization: 'telepath', tier: 6, effects: { type: 'control', damageType: 'psychic', saveType: 'wis', savePenalty: -4, controlType: 'absolute_dominion', controlDuration: 2, failDamage: { diceCount: 2, diceSides: 10 }, failEffect: 'stunned', failDuration: 1, description: 'Absolute mind control for 2 rounds; stun + 2d10 psychic on save.' }, cooldown: 1, prerequisiteAbilityId: 'psi-tel-5', levelRequired: 40 },

  // ---- Seer (precognition/buffs) ----
  { id: 'psi-see-1', name: 'Foresight', description: 'Glimpse the immediate future, boosting your defenses and reflexes.', class: 'psion', specialization: 'seer', tier: 1, effects: { type: 'buff', acBonus: 2, saveBonus: 2, duration: 3, targetSelf: true, description: 'Self-buff granting +2 AC and +2 to all saves for 3 rounds.' }, cooldown: 0, levelRequired: 1 },
  { id: 'psi-see-2', name: 'Danger Sense', description: 'Your precognitive awareness prevents surprise and reveals hidden threats.', class: 'psion', specialization: 'seer', tier: 2, effects: { type: 'passive', cannotBeSurprised: true, initiativeBonus: 2, revealHidden: true, description: 'Passive: cannot be surprised, +2 initiative, detect hidden enemies.' }, cooldown: 0, prerequisiteAbilityId: 'psi-see-1', levelRequired: 5 },
  { id: 'psi-see-3', name: 'Precognitive Dodge', description: 'See an attack before it lands and twist out of the way, negating it entirely.', class: 'psion', specialization: 'seer', tier: 3, effects: { type: 'reaction', negateAttack: true, usesPerCombat: 1, description: 'Reaction: negate one incoming attack. Once per combat.' }, cooldown: 1, prerequisiteAbilityId: 'psi-see-2', levelRequired: 12 },
  { id: 'psi-see-4', name: 'Third Eye', description: 'Open your third eye to perceive what others cannot: invisible creatures, disguises, and hidden traps.', class: 'psion', specialization: 'seer', tier: 4, effects: { type: 'passive', seeInvisible: true, seeDisguises: true, immuneBlinded: true, trapDetectionBonus: 2, description: 'Passive: see invisible, see through disguises, immune to blinded, +2 trap detection.' }, cooldown: 0, prerequisiteAbilityId: 'psi-see-3', levelRequired: 18 },
  { id: 'psi-see-5', name: 'Temporal Echo', description: 'Fold time to repeat your last action instantly as a free action.', class: 'psion', specialization: 'seer', tier: 5, effects: { type: 'echo', repeatLastAction: true, freeAction: true, description: 'Repeat your previous combat action as a free action this turn.' }, cooldown: 1, prerequisiteAbilityId: 'psi-see-4', levelRequired: 28 },
  { id: 'psi-see-6', name: 'Prescient Mastery', description: 'Your foresight becomes absolute: enemies attack at disadvantage, you act with advantage, and your reflexes are unmatched.', class: 'psion', specialization: 'seer', tier: 6, effects: { type: 'buff', duration: 3, enemyDisadvantage: true, selfAdvantage: true, saveBonus: 4, actFirst: true, description: 'Buff: enemies have disadvantage, you have advantage, +4 saves, act first for 3 rounds.' }, cooldown: 1, prerequisiteAbilityId: 'psi-see-5', levelRequired: 40 },

  // ---- Nomad (teleportation/spatial) ----
  { id: 'psi-nom-1', name: 'Blink Strike', description: 'Teleport adjacent to a target and strike before they can react.', class: 'psion', specialization: 'nomad', tier: 1, effects: { type: 'teleport_attack', attackBonus: 2, damageBonus: 'int', noReactions: true, description: 'Teleport to target and attack with +2 hit and INT damage bonus. No opportunity attacks.' }, cooldown: 0, levelRequired: 1 },
  { id: 'psi-nom-2', name: 'Phase Step', description: 'Your body flickers between dimensions, letting you slip past enemies unharmed.', class: 'psion', specialization: 'nomad', tier: 2, effects: { type: 'passive', opportunityAttackAcBonus: 3, freeDisengage: true, description: 'Passive: +3 AC vs opportunity attacks, free disengage.' }, cooldown: 0, prerequisiteAbilityId: 'psi-nom-1', levelRequired: 5 },
  { id: 'psi-nom-3', name: 'Dimensional Pocket', description: 'Shift into a pocket dimension, becoming untargetable for one round. Return with advantage.', class: 'psion', specialization: 'nomad', tier: 3, effects: { type: 'phase', untargetable: true, duration: 1, advantageOnReturn: true, description: 'Phase out for 1 round (untargetable). Gain advantage on first attack when you return.' }, cooldown: 1, prerequisiteAbilityId: 'psi-nom-2', levelRequired: 12 },
  { id: 'psi-nom-4', name: 'Translocation', description: 'Swap positions with a target. Enemies lose their action; allies gain a defensive bonus.', class: 'psion', specialization: 'nomad', tier: 4, effects: { type: 'swap', saveType: 'int', enemyEffect: 'lose_action', allyEffect: { acBonus: 2, duration: 1 }, description: 'Swap positions with any combatant. Enemy targets lose action (INT save); allies gain +2 AC for 1 round.' }, cooldown: 1, prerequisiteAbilityId: 'psi-nom-3', levelRequired: 18 },
  { id: 'psi-nom-5', name: 'Rift Walk', description: 'Tear open a spatial rift that damages and slows all enemies it passes through.', class: 'psion', specialization: 'nomad', tier: 5, effects: { type: 'aoe_damage_status', damageType: 'psychic', diceCount: 2, diceSides: 8, damageBonus: 'int', saveType: 'wis', statusEffect: 'slowed', statusDuration: 2, description: 'AoE spatial rift dealing psychic damage and slowing enemies for 2 rounds.' }, cooldown: 1, prerequisiteAbilityId: 'psi-nom-4', levelRequired: 28 },
  { id: 'psi-nom-6', name: 'Banishment', description: 'Hurl a target into a dimensional void. They return after 3 rounds, damaged and stunned. On save, reduced effect.', class: 'psion', specialization: 'nomad', tier: 6, effects: { type: 'banish', saveType: 'int', savePenalty: -2, banishDuration: 3, returnDamage: { diceCount: 4, diceSides: 6 }, returnEffect: 'stunned', returnDuration: 1, failDamage: { diceCount: 2, diceSides: 6 }, failEffect: 'slowed', failDuration: 1, noDuplicateBanish: true, description: 'Banish target for 3 rounds; 4d6 + stun on return. Save: 2d6 + slowed instead. Cannot stack.' }, cooldown: 1, prerequisiteAbilityId: 'psi-nom-5', levelRequired: 40 },
];
