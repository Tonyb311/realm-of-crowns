# =============================================================================
# REALM OF CROWNS — PROFESSION & ECONOMY MASTER REFERENCE
# =============================================================================
# This is the SINGLE SOURCE OF TRUTH for all professions, resources, recipes,
# and their interdependencies. Every agent prompt references this document.
#
# FORMAT: YAML-style structured data optimized for AI dependency tracing.
# To trace a chain: Find any item → check its recipe.inputs → trace each
# input back to its source (gathered or crafted) → repeat until you hit
# a raw gathered resource.
#
# LAST UPDATED: 2026-02-15
# STATUS: FARMER + COOK fully designed. All others skeleton/planned.
# =============================================================================


# =============================================================================
# SECTION 1: GATHERING SPOTS & RAW RESOURCES
# =============================================================================
# These are the 8 spot types that exist across 69 towns.
# Every resource listed here can be gathered by ANY player (no profession req).
# Gathering professions get BONUS YIELD at their specialty spots.
# =============================================================================

gathering_spot_types:

  orchard:
    resource: Apple
    item_id: apple
    category: FOOD
    base_value: 3
    yield: 1-3
    edible: true
    hp_restore: 5
    description: "A crisp, red apple. Eaten raw or used in cooking."
    gather_professions: [FARMER]       # These professions get bonus yield here
    craft_consumers: [COOK, BREWER]    # These professions use this as input
    regions: [Heartlands, Crossroads, Suncoast]

  berry_thicket:
    resource: Wild Berries
    item_id: wild_berries
    category: FOOD
    base_value: 2
    yield: 1-3
    edible: true
    hp_restore: 3
    description: "A handful of tart wild berries. Eat them fresh or bake them into something better."
    gather_professions: [FARMER, HERBALIST]
    craft_consumers: [COOK, BREWER, ALCHEMIST]
    regions: [Heartlands]

  herb_garden:
    resource: Wild Herbs
    item_id: wild_herbs
    category: FOOD
    base_value: 5
    yield: 1-2
    edible: true
    hp_restore: 3
    description: "Fragrant wild herbs. Used in cooking, brewing, and alchemy."
    gather_professions: [HERBALIST, FARMER]
    craft_consumers: [COOK, BREWER, ALCHEMIST]
    regions: [Heartlands, Silverwood, Crossroads, Shadowmere]

  fishing_pond:
    resource: Raw Fish
    item_id: raw_fish
    category: FOOD
    base_value: 4
    yield: 1-3
    edible: true
    hp_restore: 8
    description: "A fresh-caught fish. Better cooked, but edible raw in a pinch."
    gather_professions: [FISHERMAN]
    craft_consumers: [COOK]
    regions: [Crossroads, Shadowmere, Suncoast]

  forest:
    resource: Wood Logs
    item_id: wood_logs
    category: MATERIAL
    base_value: 5
    yield: 1-3
    edible: false
    description: "Rough-cut timber. Used by woodworkers, fletchers, and builders."
    gather_professions: [LUMBERJACK]
    craft_consumers: [WOODWORKER, FLETCHER, MASON, SCRIBE]
    regions: [Silverwood, Crossroads, Frozen Reaches]

  mine:
    resource: Iron Ore
    item_id: iron_ore
    category: MATERIAL
    base_value: 6
    yield: 1-2
    edible: false
    description: "Raw iron ore. Must be smelted before a blacksmith can work it."
    gather_professions: [MINER]
    craft_consumers: [SMELTER]
    regions: [Ironvault, Ashenfang, Frozen Reaches]

  quarry:
    resource: Stone Blocks
    item_id: stone_blocks
    category: MATERIAL
    base_value: 7
    yield: 1-2
    edible: false
    description: "Rough-hewn stone. Used by masons and builders."
    gather_professions: [MINER]
    craft_consumers: [MASON, JEWELER]
    regions: [Ironvault, Ashenfang, Frozen Reaches]

  clay_pit:
    resource: Clay
    item_id: clay
    category: MATERIAL
    base_value: 4
    yield: 1-3
    edible: false
    description: "Wet clay from the riverbank. Used in pottery, building, and alchemy."
    gather_professions: [MINER]
    craft_consumers: [MASON, ALCHEMIST]
    regions: [Ashenfang, Shadowmere, Suncoast]


# =============================================================================
# SECTION 2: NEW GATHERING SPOTS NEEDED
# =============================================================================
# The current 8 spot types don't cover all gathering professions.
# These need to be added to complete the economy.
# Priority: Add when implementing the paired crafting profession.
# =============================================================================

planned_gathering_spots:

  grain_field:
    status: NEEDED_FOR_COOK          # Add when implementing COOK
    resource: Grain
    item_id: grain
    category: FOOD
    base_value: 3
    yield: 2-4
    edible: false                    # Raw grain isn't edible — must be processed
    description: "Golden stalks of wheat and barley. The foundation of bread and beer."
    gather_professions: [FARMER]
    craft_consumers: [COOK, BREWER]
    assign_to_regions: [Heartlands, Crossroads, Suncoast]
    notes: "Replace some orchard/berry spots OR add as second spot to farming towns"

  vegetable_patch:
    status: NEEDED_FOR_COOK
    resource: Vegetables
    item_id: vegetables
    category: FOOD
    base_value: 3
    yield: 1-3
    edible: true
    hp_restore: 4
    description: "Carrots, onions, and turnips pulled fresh from the earth."
    gather_professions: [FARMER]
    craft_consumers: [COOK]
    assign_to_regions: [Heartlands, Crossroads]
    notes: "Add to towns that currently have orchards — gives FARMER towns more variety"

  pasture:
    status: NEEDED_FOR_TANNER
    resource: Raw Hide
    item_id: raw_hide
    category: MATERIAL
    base_value: 5
    yield: 1-2
    edible: false
    description: "Untreated animal hide. Must be tanned before leatherworking."
    gather_professions: [RANCHER]
    craft_consumers: [TANNER]
    assign_to_regions: [Heartlands, Crossroads]

  # RANCHER needs multiple products eventually:
  # - Raw Hide → TANNER → LEATHERWORKER
  # - Wool → TAILOR
  # - Milk/Eggs → COOK
  # For now, Raw Hide is the priority (enables armor crafting chain)

  hunting_ground:
    status: PLANNED
    resource: Game Meat
    item_id: game_meat
    category: FOOD
    base_value: 6
    yield: 1-2
    edible: true
    hp_restore: 10
    description: "Fresh venison from the hunt. Rich and hearty."
    gather_professions: [HUNTER]
    craft_consumers: [COOK, TANNER]
    assign_to_regions: [Silverwood, Frozen Reaches]


# =============================================================================
# SECTION 3: PROFESSIONS — FULL REGISTRY
# =============================================================================
# 28 professions: 7 Gathering, 15 Crafting, 6 Service
# Max 3 professions per character.
# Profession unlocks at character Level 3.
# =============================================================================

professions:

  # ---------------------------------------------------------------------------
  # GATHERING PROFESSIONS (7)
  # These DON'T craft. They gather raw resources with bonus yield.
  # ---------------------------------------------------------------------------

  FARMER:
    type: GATHERING
    unlock_level: 3
    description: "Tends crops and orchards. Bonus yield at agricultural gathering spots."
    bonus_spots: [orchard, berry_thicket, grain_field, vegetable_patch]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [COOK, BREWER]
    status: EXISTS_IN_GAME

  RANCHER:
    type: GATHERING
    unlock_level: 3
    description: "Raises livestock. Provides hides, wool, and animal products."
    bonus_spots: [pasture]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [TANNER, TAILOR, COOK]
    status: EXISTS_IN_GAME
    notes: "Pasture spots not yet created"

  FISHERMAN:
    type: GATHERING
    unlock_level: 3
    description: "Catches fish from rivers, lakes, and the sea."
    bonus_spots: [fishing_pond]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [COOK]
    status: EXISTS_IN_GAME

  LUMBERJACK:
    type: GATHERING
    unlock_level: 3
    description: "Fells trees and prepares timber."
    bonus_spots: [forest]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [WOODWORKER, FLETCHER, MASON, SCRIBE]
    status: EXISTS_IN_GAME

  MINER:
    type: GATHERING
    unlock_level: 3
    description: "Extracts ore, stone, gems, and clay from the earth."
    bonus_spots: [mine, quarry, clay_pit]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [SMELTER, MASON, JEWELER]
    status: EXISTS_IN_GAME

  HERBALIST:
    type: GATHERING
    unlock_level: 3
    description: "Forages for medicinal and magical herbs."
    bonus_spots: [herb_garden, berry_thicket]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [ALCHEMIST, COOK, BREWER]
    status: EXISTS_IN_GAME

  HUNTER:
    type: GATHERING
    unlock_level: 3
    description: "Tracks and hunts wild game for meat and pelts."
    bonus_spots: [hunting_ground]
    bonus_yield: "+50% quantity at specialty spots"
    feeds_into: [COOK, TANNER, FLETCHER]
    status: PLANNED
    notes: "Hunting grounds not yet created"

  # ---------------------------------------------------------------------------
  # CRAFTING PROFESSIONS (15)
  # These transform gathered/intermediate resources into finished goods.
  # Each consumes daily action. Each requires the profession to craft.
  # ---------------------------------------------------------------------------

  COOK:
    type: CRAFTING
    unlock_level: 3
    description: "Transforms raw ingredients into meals that restore HP and grant buffs."
    depends_on_gatherers: [FARMER, FISHERMAN, RANCHER, HUNTER, HERBALIST]
    raw_inputs: [apple, wild_berries, wild_herbs, raw_fish, grain, vegetables, game_meat]
    intermediate_inputs: [flour]          # Things COOK makes and reuses
    output_categories: [FOOD, DRINK]
    status: DESIGNING                     # ← FIRST CRAFTING PROF TO BUILD
    # See SECTION 4 for full recipe tree

  BREWER:
    type: CRAFTING
    unlock_level: 5
    description: "Brews ale, wine, mead, and spirits from agricultural ingredients."
    depends_on_gatherers: [FARMER, HERBALIST]
    raw_inputs: [grain, wild_berries, wild_herbs, apple]
    intermediate_inputs: []
    output_categories: [DRINK]
    status: PLANNED
    notes: "Second food-chain profession. Drinks provide buffs, not HP."

  SMELTER:
    type: CRAFTING
    unlock_level: 3
    description: "Smelts raw ore into usable metal ingots and alloys."
    depends_on_gatherers: [MINER]
    raw_inputs: [iron_ore]
    intermediate_inputs: []
    output_categories: [MATERIAL]
    outputs_used_by: [BLACKSMITH, ARMORER, JEWELER]
    status: PLANNED
    notes: "Bottleneck profession — BLACKSMITH and ARMORER both need ingots"

  BLACKSMITH:
    type: CRAFTING
    unlock_level: 5
    description: "Forges weapons and metal tools from ingots."
    depends_on_gatherers: []             # Doesn't use raw resources directly
    intermediate_inputs: [iron_ingot]    # From SMELTER
    output_categories: [WEAPON, TOOL]
    status: PLANNED
    notes: "Requires SMELTER output. Classic 3-step chain: MINER → SMELTER → BLACKSMITH"

  ARMORER:
    type: CRAFTING
    unlock_level: 5
    description: "Crafts metal armor and shields."
    depends_on_gatherers: []
    intermediate_inputs: [iron_ingot, leather]  # SMELTER + TANNER
    output_categories: [ARMOR, SHIELD]
    status: PLANNED
    notes: "Cross-chain: needs both SMELTER and TANNER outputs"

  WOODWORKER:
    type: CRAFTING
    unlock_level: 3
    description: "Shapes timber into furniture, tools, and building components."
    depends_on_gatherers: [LUMBERJACK]
    raw_inputs: [wood_logs]
    intermediate_inputs: []
    output_categories: [TOOL, FURNITURE, MATERIAL]
    outputs_used_by: [FLETCHER]
    status: PLANNED

  TANNER:
    type: CRAFTING
    unlock_level: 3
    description: "Processes raw hides into workable leather."
    depends_on_gatherers: [RANCHER, HUNTER]
    raw_inputs: [raw_hide]
    intermediate_inputs: []
    output_categories: [MATERIAL]
    outputs_used_by: [LEATHERWORKER, ARMORER, TAILOR]
    status: PLANNED
    notes: "Bottleneck like SMELTER — multiple professions need leather"

  LEATHERWORKER:
    type: CRAFTING
    unlock_level: 5
    description: "Crafts leather armor, bags, belts, and accessories."
    depends_on_gatherers: []
    intermediate_inputs: [leather]       # From TANNER
    output_categories: [ARMOR, ACCESSORY, CONTAINER]
    status: PLANNED

  TAILOR:
    type: CRAFTING
    unlock_level: 3
    description: "Weaves cloth and sews clothing and robes."
    depends_on_gatherers: [RANCHER]
    raw_inputs: []
    intermediate_inputs: [wool_cloth]    # Eventually from RANCHER → TAILOR pipeline
    output_categories: [ARMOR, CLOTHING]
    status: PLANNED
    notes: "Needs wool from RANCHER (not yet implemented as gathering resource)"

  ALCHEMIST:
    type: CRAFTING
    unlock_level: 5
    description: "Brews potions, elixirs, and magical reagents."
    depends_on_gatherers: [HERBALIST]
    raw_inputs: [wild_herbs]
    intermediate_inputs: []
    output_categories: [POTION, REAGENT]
    status: PLANNED

  ENCHANTER:
    type: CRAFTING
    unlock_level: 7
    description: "Imbues items with magical properties."
    depends_on_gatherers: []
    intermediate_inputs: [reagent]       # From ALCHEMIST
    output_categories: [ENCHANTMENT]
    status: PLANNED
    notes: "End-of-chain. Takes finished items + reagents → enchanted items"

  JEWELER:
    type: CRAFTING
    unlock_level: 5
    description: "Cuts gems and crafts jewelry and accessories."
    depends_on_gatherers: [MINER]
    raw_inputs: [stone_blocks]           # Eventually needs gems (new resource)
    intermediate_inputs: [iron_ingot]    # For settings
    output_categories: [ACCESSORY, TRADE_GOOD]
    status: PLANNED

  FLETCHER:
    type: CRAFTING
    unlock_level: 5
    description: "Crafts bows, crossbows, and ammunition."
    depends_on_gatherers: [LUMBERJACK, HUNTER]
    raw_inputs: [wood_logs]
    intermediate_inputs: [leather]       # From TANNER (bowstrings, grips)
    output_categories: [WEAPON, AMMO]
    status: PLANNED

  MASON:
    type: CRAFTING
    unlock_level: 5
    description: "Works stone into building materials and structures."
    depends_on_gatherers: [MINER, LUMBERJACK]
    raw_inputs: [stone_blocks, wood_logs, clay]
    intermediate_inputs: []
    output_categories: [BUILDING_MATERIAL]
    status: PLANNED
    notes: "Feeds into Housing system (player-owned buildings)"

  SCRIBE:
    type: CRAFTING
    unlock_level: 5
    description: "Creates scrolls, books, maps, and written works."
    depends_on_gatherers: [LUMBERJACK, HERBALIST]
    raw_inputs: [wood_logs, wild_herbs]   # Wood→paper, herbs→ink
    intermediate_inputs: []
    output_categories: [SCROLL, BOOK, MAP]
    status: PLANNED

  # ---------------------------------------------------------------------------
  # SERVICE PROFESSIONS (6)
  # These don't craft items — they provide services, run businesses,
  # or interact with other game systems.
  # ---------------------------------------------------------------------------

  MERCHANT:
    type: SERVICE
    unlock_level: 3
    description: "Trades goods with bonuses. Lower market fees, better buy/sell prices."
    mechanics: "Reduced market listing fees. CHA bonus on auction bids. Can run a shop."
    status: EXISTS_IN_GAME

  INNKEEPER:
    type: SERVICE
    unlock_level: 5
    description: "Runs a tavern. Sells food/drink, provides rest bonuses."
    mechanics: "Stocks food from COOKs and drinks from BREWERs. Rest bonus for visitors."
    depends_on: [COOK, BREWER]
    status: PLANNED

  HEALER:
    type: SERVICE
    unlock_level: 5
    description: "Heals other players. Uses potions from ALCHEMISTs."
    mechanics: "Can heal other characters. Consumes potions. Earns gold per heal."
    depends_on: [ALCHEMIST]
    status: PLANNED

  STABLE_MASTER:
    type: SERVICE
    unlock_level: 5
    description: "Manages mounts and speeds up travel."
    mechanics: "Reduces travel time for customers. Can breed/sell mounts."
    status: PLANNED

  BANKER:
    type: SERVICE
    unlock_level: 7
    description: "Manages gold storage, loans, and interest."
    mechanics: "Secure gold storage. Can issue loans. Earns interest."
    status: PLANNED

  COURIER:
    type: SERVICE
    unlock_level: 3
    description: "Delivers items between towns for other players."
    mechanics: "Can carry items for others. Faster travel. Delivery quests."
    status: PLANNED


# =============================================================================
# SECTION 4: COOK RECIPE TREE (FIRST CRAFTING PROFESSION)
# =============================================================================
# COOK is the first crafting profession to be fully implemented.
# It establishes the pattern for all other crafting professions.
#
# Design principles:
# - Every recipe uses resources that exist (or will exist) as gathered items
# - Progressive complexity: T1 = 1 input, T2 = 2 inputs, T3 = 2-3 inputs
# - Intermediate ingredients (Flour) are crafted by COOK and reused in higher tiers
# - Crafted food > raw food in both HP restore and sell value
# - Food grants buffs at higher tiers (economic incentive to level COOK)
# =============================================================================

cook_recipes:

  # --- INTERMEDIATES (craft these to use in higher-tier recipes) ---

  flour:
    id: flour
    name: Flour
    description: "Finely ground grain. The foundation of all baking."
    category: INGREDIENT
    base_value: 5
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 8
    inputs:
      - item_id: grain
        quantity: 2
    outputs:
      - item_id: flour
        quantity: 1
    notes: "Intermediate ingredient. Not edible. Used in Bread, Pie, Pastry, Feast."

  # --- TIER 1: APPRENTICE (Level 3-4) ---
  # Single input, basic food. First things a new COOK makes.

  apple_sauce:
    id: apple_sauce
    name: Apple Sauce
    description: "Sweet stewed apples. Simple comfort food."
    category: FOOD
    base_value: 8
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 10
    inputs:
      - item_id: apple
        quantity: 3
    outputs:
      - item_id: apple_sauce
        quantity: 1
    effects:
      hp_restore: 15
    crafting_note: "3 Apples (9g raw) → 1 Apple Sauce (8g + 15 HP). Value is in the HP, not resale."

  porridge:
    id: porridge
    name: Porridge
    description: "Thick, hearty grain porridge. Keeps you going all day."
    category: FOOD
    base_value: 7
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 10
    inputs:
      - item_id: grain
        quantity: 2
    outputs:
      - item_id: porridge
        quantity: 1
    effects:
      hp_restore: 12

  berry_jam:
    id: berry_jam
    name: Berry Jam
    description: "Sweet preserved berries. Delicious on bread."
    category: INGREDIENT
    base_value: 6
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 8
    inputs:
      - item_id: wild_berries
        quantity: 3
    outputs:
      - item_id: berry_jam
        quantity: 1
    notes: "Intermediate + edible. Can eat for 8 HP or use in Tier 2 recipes."
    effects:
      hp_restore: 8

  grilled_fish:
    id: grilled_fish
    name: Grilled Fish
    description: "Simply grilled over an open flame. Much better than raw."
    category: FOOD
    base_value: 10
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 10
    inputs:
      - item_id: raw_fish
        quantity: 2
    outputs:
      - item_id: grilled_fish
        quantity: 1
    effects:
      hp_restore: 20

  herbal_tea:
    id: herbal_tea
    name: Herbal Tea
    description: "A soothing brew of wild herbs. Restores body and spirit."
    category: DRINK
    base_value: 10
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 10
    inputs:
      - item_id: wild_herbs
        quantity: 2
    outputs:
      - item_id: herbal_tea
        quantity: 1
    effects:
      hp_restore: 10
      buff: "calm"
      buff_duration_ticks: 1
      buff_description: "+1 WIS for 1 tick"

  vegetable_stew:
    id: vegetable_stew
    name: Vegetable Stew
    description: "A thick, warming stew of root vegetables."
    category: FOOD
    base_value: 8
    tier: 1
    level_required: 3
    profession: COOK
    xp_reward: 10
    inputs:
      - item_id: vegetables
        quantity: 3
    outputs:
      - item_id: vegetable_stew
        quantity: 1
    effects:
      hp_restore: 15

  # --- TIER 2: JOURNEYMAN (Level 5-6) ---
  # Two inputs OR uses an intermediate from Tier 1.

  bread_loaf:
    id: bread_loaf
    name: Bread Loaf
    description: "A crusty golden loaf. The staff of life."
    category: FOOD
    base_value: 12
    tier: 2
    level_required: 5
    profession: COOK
    xp_reward: 15
    inputs:
      - item_id: flour
        quantity: 2
    outputs:
      - item_id: bread_loaf
        quantity: 1
    effects:
      hp_restore: 20
    dependency_chain: "Grain →[COOK]→ Flour →[COOK]→ Bread Loaf"

  apple_pie:
    id: apple_pie
    name: Apple Pie
    description: "Warm apple pie with a flaky crust. A countryside classic."
    category: FOOD
    base_value: 18
    tier: 2
    level_required: 5
    profession: COOK
    xp_reward: 18
    inputs:
      - item_id: flour
        quantity: 1
      - item_id: apple
        quantity: 3
    outputs:
      - item_id: apple_pie
        quantity: 1
    effects:
      hp_restore: 30
    dependency_chain: "Grain →[COOK]→ Flour + Apples →[COOK]→ Apple Pie"

  fish_stew:
    id: fish_stew
    name: Fish Stew
    description: "A hearty chowder with fresh fish and herbs."
    category: FOOD
    base_value: 16
    tier: 2
    level_required: 5
    profession: COOK
    xp_reward: 18
    inputs:
      - item_id: raw_fish
        quantity: 2
      - item_id: wild_herbs
        quantity: 1
    outputs:
      - item_id: fish_stew
        quantity: 1
    effects:
      hp_restore: 28
      buff: "well_fed"
      buff_duration_ticks: 2
      buff_description: "+1 CON for 2 ticks"

  seasoned_roast_vegetables:
    id: seasoned_roast_vegetables
    name: Seasoned Roast Vegetables
    description: "Roasted roots glazed with herbal seasoning."
    category: FOOD
    base_value: 14
    tier: 2
    level_required: 5
    profession: COOK
    xp_reward: 15
    inputs:
      - item_id: vegetables
        quantity: 2
      - item_id: wild_herbs
        quantity: 1
    outputs:
      - item_id: seasoned_roast_vegetables
        quantity: 1
    effects:
      hp_restore: 22
      buff: "nourished"
      buff_duration_ticks: 1
      buff_description: "+1 STR for 1 tick"

  berry_tart:
    id: berry_tart
    name: Berry Tart
    description: "A crisp pastry shell filled with sweet berry jam."
    category: FOOD
    base_value: 16
    tier: 2
    level_required: 5
    profession: COOK
    xp_reward: 18
    inputs:
      - item_id: flour
        quantity: 1
      - item_id: berry_jam
        quantity: 1
    outputs:
      - item_id: berry_tart
        quantity: 1
    effects:
      hp_restore: 25
    dependency_chain: "Grain →[COOK]→ Flour + Berries →[COOK]→ Jam →[COOK]→ Berry Tart"

  # --- TIER 3: EXPERT (Level 7+) ---
  # 2-3 inputs, premium effects, cross-resource ingredients.

  harvest_feast:
    id: harvest_feast
    name: Harvest Feast
    description: "A grand platter of bread, roasted fruit, and herbed vegetables. Fit for a lord."
    category: FOOD
    base_value: 35
    tier: 3
    level_required: 7
    profession: COOK
    xp_reward: 30
    inputs:
      - item_id: bread_loaf
        quantity: 1
      - item_id: apple
        quantity: 2
      - item_id: wild_herbs
        quantity: 2
    outputs:
      - item_id: harvest_feast
        quantity: 1
    effects:
      hp_restore: 50
      buff: "feast_spirit"
      buff_duration_ticks: 3
      buff_description: "+2 CON, +1 CHA for 3 ticks"
    dependency_chain: "Grain →[COOK]→ Flour →[COOK]→ Bread + Apples + Herbs →[COOK]→ Harvest Feast"

  fisherman_banquet:
    id: fisherman_banquet
    name: Fisherman's Banquet
    description: "Grilled fish on herb bread with berry glaze. A coastal delicacy."
    category: FOOD
    base_value: 32
    tier: 3
    level_required: 7
    profession: COOK
    xp_reward: 30
    inputs:
      - item_id: grilled_fish
        quantity: 1
      - item_id: bread_loaf
        quantity: 1
      - item_id: berry_jam
        quantity: 1
    outputs:
      - item_id: fisherman_banquet
        quantity: 1
    effects:
      hp_restore: 45
      buff: "sea_strength"
      buff_duration_ticks: 3
      buff_description: "+2 STR, +1 DEX for 3 ticks"
    dependency_chain: "Fish →[COOK]→ Grilled Fish + Grain →[COOK]→ Flour →[COOK]→ Bread + Berries →[COOK]→ Jam →[COOK]→ Banquet"

  spiced_pastry:
    id: spiced_pastry
    name: Spiced Pastry
    description: "A delicate pastry layered with herbed honey and berry filling. A luxury trade good."
    category: TRADE_GOOD
    base_value: 40
    tier: 3
    level_required: 7
    profession: COOK
    xp_reward: 25
    inputs:
      - item_id: flour
        quantity: 2
      - item_id: wild_herbs
        quantity: 2
      - item_id: berry_jam
        quantity: 1
    outputs:
      - item_id: spiced_pastry
        quantity: 1
    effects:
      hp_restore: 20
    notes: "High sell value, moderate HP. Designed as a trade good — COOKs make these to sell, not eat."
    dependency_chain: "Grain →[COOK]→ Flour + Herbs + Berries →[COOK]→ Jam →[COOK]→ Spiced Pastry"


# =============================================================================
# SECTION 5: DEPENDENCY CHAINS (QUICK REFERENCE)
# =============================================================================
# Read these bottom-to-top: raw resource → ... → final product
# Arrow labels show which profession does the transformation.
# =============================================================================

dependency_chains:

  # --- FOOD CHAIN (FARMER + FISHERMAN + HERBALIST → COOK) ---
  basic_food:
    Apple ──[COOK]──→ Apple Sauce
    Grain ──[COOK]──→ Porridge
    Grain ──[COOK]──→ Flour (intermediate)
    Wild Berries ──[COOK]──→ Berry Jam (intermediate)
    Raw Fish ──[COOK]──→ Grilled Fish
    Wild Herbs ──[COOK]──→ Herbal Tea
    Vegetables ──[COOK]──→ Vegetable Stew

  advanced_food:
    Flour ──[COOK]──→ Bread Loaf
    Flour + Apple ──[COOK]──→ Apple Pie
    Fish + Herbs ──[COOK]──→ Fish Stew
    Vegetables + Herbs ──[COOK]──→ Seasoned Roast Vegetables
    Flour + Berry Jam ──[COOK]──→ Berry Tart

  premium_food:
    Bread + Apple + Herbs ──[COOK]──→ Harvest Feast
    Grilled Fish + Bread + Berry Jam ──[COOK]──→ Fisherman's Banquet
    Flour + Herbs + Berry Jam ──[COOK]──→ Spiced Pastry

  # --- METAL CHAIN (MINER → SMELTER → BLACKSMITH/ARMORER) ---
  metal_weapons:
    Iron Ore ──[SMELTER]──→ Iron Ingot ──[BLACKSMITH]──→ Iron Sword / Axe / Tools
  metal_armor:
    Iron Ore ──[SMELTER]──→ Iron Ingot ──[ARMORER]──→ Chain Mail / Shield
    Raw Hide ──[TANNER]──→ Leather ──[ARMORER]──→ Reinforced Armor (ingot + leather)

  # --- LEATHER CHAIN (RANCHER/HUNTER → TANNER → LEATHERWORKER/ARMORER) ---
  leather_goods:
    Raw Hide ──[TANNER]──→ Leather ──[LEATHERWORKER]──→ Leather Armor / Bags / Belts

  # --- WOOD CHAIN (LUMBERJACK → WOODWORKER → FLETCHER) ---
  wood_goods:
    Wood Logs ──[WOODWORKER]──→ Planks / Handles ──[FLETCHER]──→ Bows / Arrows
    Wood Logs ──[WOODWORKER]──→ Furniture / Tools

  # --- MAGIC CHAIN (HERBALIST → ALCHEMIST → ENCHANTER) ---
  magic_items:
    Wild Herbs ──[ALCHEMIST]──→ Potions / Reagents ──[ENCHANTER]──→ Enchanted Items

  # --- TEXTILE CHAIN (RANCHER → TAILOR) ---
  clothing:
    Wool ──[TAILOR]──→ Cloth ──[TAILOR]──→ Robes / Clothing

  # --- BUILDING CHAIN (MINER + LUMBERJACK → MASON) ---
  buildings:
    Stone Blocks + Wood Logs + Clay ──[MASON]──→ Building Materials → Housing System

  # --- KNOWLEDGE CHAIN (LUMBERJACK + HERBALIST → SCRIBE) ---
  scrolls:
    Wood Logs ──[SCRIBE]──→ Paper + Wild Herbs ──[SCRIBE]──→ Ink → Scrolls / Maps / Books


# =============================================================================
# SECTION 6: ECONOMY RULES
# =============================================================================

economy_rules:

  value_chain:
    principle: "Each profession step adds value"
    example: "Apple (3g) → Apple Sauce (8g) → Apple Pie (18g) → Harvest Feast (35g)"
    rule: "Crafted output base_value > sum of input base_values"

  scarcity_by_region:
    principle: "Different towns produce different resources"
    rule: "No town has all resource types. Players must travel or trade."
    example: "Ironvault has mines but no orchards. Must buy food from Heartlands."

  profession_limit:
    max_per_character: 3
    principle: "No self-sufficiency"
    example: "FARMER + COOK + MERCHANT = gather crops, cook food, sell it well"
    counter: "But they can't mine, smelt, or smith — need other players for weapons"

  durability_and_consumption:
    principle: "Items break or are consumed, creating perpetual demand"
    food: "Consumed on use — gone forever"
    equipment: "Has durability — breaks after use, needs repair or replacement"
    potions: "Single use"
    buildings: "Require upkeep materials"

  quality_system:
    formula: "d20 + (ProfessionLevel / 5) + ToolBonus + WorkshopBonus"
    tiers: [Poor, Common, Fine, Superior, Masterwork, Legendary]
    effect: "Higher quality = better stats/effects + higher sell value"
    note: "Applies to crafting, not gathering. Gathering yield is quantity-based."


# =============================================================================
# SECTION 7: IMPLEMENTATION PRIORITY
# =============================================================================

implementation_order:

  phase_1:
    name: "FARMER + COOK (Food Chain)"
    status: IN_PROGRESS
    tasks:
      - "Add grain_field and vegetable_patch gathering spots to farming-region towns"
      - "Define all COOK recipe items in item registry"
      - "Seed COOK recipes in database"
      - "Verify crafting pipeline: ingredients → craft → item in inventory → XP"
      - "Update sim bots: COOK bots gather ingredients then craft"
      - "Verify in 30-tick simulation"

  phase_2:
    name: "MINER → SMELTER → BLACKSMITH (Metal Chain)"
    status: PLANNED
    tasks:
      - "Define Iron Ingot intermediate item"
      - "Create SMELTER recipes (ore → ingot)"
      - "Create BLACKSMITH recipes (ingot → weapons/tools)"
      - "Weapons need: damage stats, durability, equipment slot"
      - "Requires: equipment system, combat integration"

  phase_3:
    name: "RANCHER → TANNER → LEATHERWORKER (Leather Chain)"
    status: PLANNED
    tasks:
      - "Add pasture gathering spots"
      - "Create TANNER recipes (hide → leather)"
      - "Create LEATHERWORKER recipes (leather → armor/bags)"
      - "Requires: armor stats, equipment system"

  phase_4:
    name: "HERBALIST → ALCHEMIST (Potion Chain)"
    status: PLANNED
    tasks:
      - "Create ALCHEMIST recipes (herbs → potions)"
      - "Potions: HP restore, buffs, combat utility"
      - "Requires: consumable item usage system, buff system"

  phase_5:
    name: "Remaining Crafting Professions"
    status: PLANNED
    professions: [BREWER, WOODWORKER, FLETCHER, TAILOR, MASON, SCRIBE, ENCHANTER, JEWELER, ARMORER]

  phase_6:
    name: "Service Professions"
    status: PLANNED
    professions: [INNKEEPER, HEALER, STABLE_MASTER, BANKER, COURIER]
    notes: "Service profs interact with other systems (housing, travel, banking) — build after those systems exist"
